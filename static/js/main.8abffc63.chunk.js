(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[0],{105:function(t,e,n){t.exports=n(133)},110:function(t,e,n){},133:function(t,e,n){"use strict";n.r(e);var a=n(0),i=n.n(a),o=n(8),r=n.n(o);n(110),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c,l,s,u,d,f=n(25),m=n(30),p=Object(m.c)({name:"todolists",initialState:[],reducers:{removeTodolistAC:function(t,e){var n=t.findIndex((function(t){return t.id===e.payload.id}));n>-1&&t.splice(n,1)},addTodolistAC:function(t,e){t.unshift(Object(f.a)(Object(f.a)({},e.payload.todolist),{},{filter:"all",entityStatus:"idle"}))},changeTodolistTitleAC:function(t,e){var n=t.findIndex((function(t){return t.id===e.payload.id}));t[n].title=e.payload.title},changeTodolistFilterAC:function(t,e){var n=t.findIndex((function(t){return t.id===e.payload.id}));t[n].filter=e.payload.filter},changeTodolistEntityStatusAC:function(t,e){var n=t.findIndex((function(t){return t.id===e.payload.id}));t[n].entityStatus=e.payload.status},setTodolistsAC:function(t,e){return e.payload.todolists.map((function(t){return Object(f.a)(Object(f.a)({},t),{},{filter:"all",entityStatus:"idle"})}))}}}),b=p.reducer,g=p.actions,h=g.removeTodolistAC,v=g.addTodolistAC,E=g.changeTodolistTitleAC,k=g.changeTodolistFilterAC,j=g.changeTodolistEntityStatusAC,y=g.setTodolistsAC,O=Object(m.c)({name:"app",initialState:{status:"idle",error:null,isInitialized:!1},reducers:{setAppStatusAC:function(t,e){t.status=e.payload.status},setAppErrorAC:function(t,e){t.error=e.payload.error},setAppInitializedAC:function(t,e){t.isInitialized=e.payload.isInitialized}}}),C=O.reducer,T=O.actions,x=T.setAppErrorAC,I=T.setAppStatusAC,w=T.setAppInitializedAC,A=n(84),S=n.n(A).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"e68751ec-99e4-4ba5-aeca-d3d2975884b0"}}),L=function(){return S.get("todo-lists")},z=function(t){return S.post("todo-lists",{title:t})},P=function(t){return S.delete("todo-lists/".concat(t))},B=function(t,e){return S.put("todo-lists/".concat(t),{title:e})},F=function(t){return S.get("todo-lists/".concat(t,"/tasks"))},D=function(t,e){return S.delete("todo-lists/".concat(t,"/tasks/").concat(e))},N=function(t,e){return S.post("todo-lists/".concat(t,"/tasks"),{title:e})},q=function(t,e,n){return S.put("todo-lists/".concat(t,"/tasks/").concat(e),n)},H=Object(m.b)("tasks/fetchTasksTC",(function(t,e){return e.dispatch(I({status:"loading"})),F(t).then((function(n){var a=n.data.items;return e.dispatch(I({status:"succeeded"})),{tasks:a,todolistId:t}}))})),M=Object(m.c)({name:"tasks",initialState:{},reducers:{removeTaskAC:function(t,e){var n=t[e.payload.todolistId],a=n.findIndex((function(t){return t.id===e.payload.taskId}));a>-1&&n.splice(a,1)},addTaskAC:function(t,e){t[e.payload.task.todoListId].unshift(e.payload.task)},updateTaskAC:function(t,e){var n=t[e.payload.todolistId],a=n.findIndex((function(t){return t.id===e.payload.taskId}));a>-1&&(n[a]=Object(f.a)(Object(f.a)({},n[a]),e.payload.model))}},extraReducers:function(t){t.addCase(v,(function(t,e){t[e.payload.todolist.id]=[]})),t.addCase(h,(function(t,e){delete t[e.payload.id]})),t.addCase(y,(function(t,e){e.payload.todolists.forEach((function(e){t[e.id]=[]}))})),t.addCase(H.fulfilled,(function(t,e){t[e.payload.todolistId]=e.payload.tasks}))}}),U=M.reducer,J=M.actions,K=J.removeTaskAC,R=J.addTaskAC,W=J.updateTaskAC,Y=n(24),V=n(50),$=Object(m.c)({name:"auth",initialState:{isLoggedIn:!1},reducers:{setIsLoggedInAC:function(t,e){t.isLoggedIn=e.payload.value}}}),G=$.reducer,Q=$.actions.setIsLoggedInAC,X=Object(Y.c)({tasks:U,todolists:b,app:C,auth:G}),Z=Object(m.a)({reducer:X,middleware:function(t){return t().prepend(V.a)}}),_=n(15),tt=n(49),et=n(47),nt=n(169),at=n(170),it=n(10),ot=n(180),rt=n(9),ct=rt.c.div(c||(c=Object(it.a)([""]))),lt=Object(rt.c)(ot.a)(l||(l=Object(it.a)(["\n  & > div {\n    background: white;\n\n    & > fieldset {\n      border-radius: 6px;\n      border-color: #c7c9d9;\n    }\n  }\n"]))),st=function(t){var e=t.addItem,n=t.disabled,o=void 0!==n&&n,r=Object(a.useState)(""),c=Object(et.a)(r,2),l=c[0],s=c[1],u=Object(a.useState)(null),d=Object(et.a)(u,2),f=d[0],m=d[1],p=function(){""!==l.trim()?(e(l),s("")):m("Title is required")};return i.a.createElement(ct,null,i.a.createElement(lt,{label:"Title",variant:"outlined",disabled:o,error:!!f,value:l,onChange:function(t){s(t.currentTarget.value)},onKeyPress:function(t){null!==f&&m(null),13===t.charCode&&p()},helperText:f}),i.a.createElement(nt.a,{color:"primary",style:{marginTop:"4px"},disabled:o,onClick:p},i.a.createElement(at.a,null)))},ut=function(t){var e=t.value,n=t.onChange,o=Object(a.useState)(!1),r=Object(et.a)(o,2),c=r[0],l=r[1],s=Object(a.useState)(e),u=Object(et.a)(s,2),d=u[0],f=u[1];return c?i.a.createElement(ot.a,{value:d,onChange:function(t){f(t.currentTarget.value)},autoFocus:!0,onBlur:function(){l(!1),n(d)}}):i.a.createElement("span",{onDoubleClick:function(){l(!0),f(e)}},e)},dt=n(172),ft=n(171),mt=n(182),pt=rt.c.div(s||(s=Object(it.a)(["\n  display: flex;\n  align-items: center;\n"])));!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(u||(u={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(d||(d={}));var bt,gt,ht,vt,Et,kt,jt,yt,Ot,Ct,Tt,xt,It,wt,At=function(t){var e=t.task,n=t.todolistId,a=t.changeTaskStatus,o=t.changeTaskTitle,r=t.removeTask,c=e.id,l=e.status,s=e.title;return i.a.createElement(pt,null,i.a.createElement(mt.a,{checked:l===u.Completed,color:"primary",onChange:function(t){var e=t.currentTarget.checked?u.Completed:u.New;a(c,e,n)}}),i.a.createElement(ut,{value:s,onChange:function(t){o(c,t,n)}}),i.a.createElement(nt.a,{onClick:function(){return r(c,n)}},i.a.createElement(ft.a,null)))},St=rt.c.div(bt||(bt=Object(it.a)(["\n  height: fit-content;\n  flex-shrink: 0;\n  border: 1px solid white;\n  border-radius: 8px;\n  background: white;\n  box-shadow: 0px 2px 8px 0px rgba(96, 97, 112, 0.06);\n  padding: 16px;\n"]))),Lt=function(t){var e=t.todolist,n=t.tasks,o=t.changeFilter,r=t.addTask,c=t.changeTaskStatus,l=t.changeTaskTitle,s=t.removeTask,d=t.removeTodolist,f=t.changeTodolistTitle,m=Object(_.b)(),p=n;return"active"===e.filter&&(p=n.filter((function(t){return t.status===u.New}))),"completed"===e.filter&&(p=n.filter((function(t){return t.status===u.Completed}))),Object(a.useEffect)((function(){var t=H(e.id);m(t)}),[]),i.a.createElement(St,null,i.a.createElement("h3",null,i.a.createElement(ut,{value:e.title,onChange:function(t){f(e.id,t)}}),i.a.createElement(nt.a,{onClick:function(){return d(e.id)},disabled:"loading"===e.entityStatus},i.a.createElement(ft.a,null))),i.a.createElement(st,{addItem:function(t){r(t,e.id)},disabled:"loading"===e.entityStatus}),i.a.createElement("div",null,p.map((function(t){return i.a.createElement(At,{key:t.id,task:t,todolistId:e.id,removeTask:s,changeTaskTitle:l,changeTaskStatus:c})}))),i.a.createElement("div",{style:{paddingTop:"10px"}},i.a.createElement(dt.a,{variant:"all"===e.filter?"outlined":"text",onClick:function(){return o("all",e.id)},color:"default"},"All"),i.a.createElement(dt.a,{variant:"active"===e.filter?"outlined":"text",onClick:function(){return o("active",e.id)},color:"primary"},"Active"),i.a.createElement(dt.a,{variant:"completed"===e.filter?"outlined":"text",onClick:function(){return o("completed",e.id)},color:"secondary"},"Completed")))},zt=n(16),Pt=function(t){return t.auth.isLoggedIn},Bt=function(t){return t.tasks},Ft=function(t){return t.todolists},Dt=n(56),Nt={colors:{primary:"#3498db"},breakpoints:{phone:500,tablet:900}},qt=function(t){return"@media (max-width: ".concat(t,"px)")},Ht=Object.keys(Nt.breakpoints).reduce((function(t,e){return Object(f.a)(Object(f.a)({},t),{},Object(Dt.a)({},e,(function(){return Object(rt.b)(gt||(gt=Object(it.a)(["\n      "," {\n        ","\n      }\n    "])),qt(Nt.breakpoints[e]),rt.b.apply(void 0,arguments))})))}),{}),Mt=rt.c.div(ht||(ht=Object(it.a)(["\n  display: flex;\n  flex-wrap: wrap;\n  gap: 20px;\n  margin-top: 40px;\n\n  ","\n"])),Ht.phone(vt||(vt=Object(it.a)(["\n    flex-direction: column;\n  "])))),Ut=function(t,e){t.messages.length?e(x({error:t.messages[0]})):e(x({error:"Some error occurred"})),e(I({status:"failed"}))},Jt=function(t,e){e(x({error:t.message?t.message:"Some error occurred"})),e(I({status:"failed"}))},Kt=function(t,e,n){return function(a,i){var o=i().tasks[n].find((function(e){return e.id===t}));if(o){var r=Object(f.a)({deadline:o.deadline,description:o.description,priority:o.priority,startDate:o.startDate,title:o.title,status:o.status},e);q(n,t,r).then((function(i){if(0===i.data.resultCode){var o=W({taskId:t,model:e,todolistId:n});a(o)}else Ut(i.data,a)})).catch((function(t){Jt(t,a)}))}else console.warn("task not found in the state")}},Rt=function(){var t=Object(_.b)(),e=Object(_.c)(Pt),n=Object(_.c)(Ft),o=Object(_.c)(Bt),r=function(e,n){var a=function(t,e){return function(n){D(e,t).then((function(a){var i=K({taskId:t,todolistId:e});n(i)}))}}(e,n);t(a)},c=function(e,n){var a=function(t,e){return function(n){n(I({status:"loading"})),N(e,t).then((function(t){if(0===t.data.resultCode){var e=t.data.data.item,a=R({task:e});n(a),n(I({status:"succeeded"}))}else Ut(t.data,n)})).catch((function(t){Jt(t,n)}))}}(e,n);t(a)},l=function(e,n,a){var i=Kt(e,{status:n},a);t(i)},s=function(e,n,a){var i=Kt(e,{title:n},a);t(i)},u=function(e,n){var a=k({id:n,filter:e});t(a)},d=function(e){var n,a=(n=e,function(t){t(I({status:"loading"})),t(j({id:n,status:"loading"})),P(n).then((function(e){t(h({id:n})),t(I({status:"succeeded"}))}))});t(a)},f=function(e,n){var a=function(t,e){return function(n){B(t,e).then((function(a){n(E({id:t,title:e}))}))}}(e,n);t(a)};return Object(a.useEffect)((function(){var e=function(t){t(I({status:"loading"})),L().then((function(e){t(y({todolists:e.data})),t(I({status:"succeeded"}))})).catch((function(e){Jt(e,t)}))};t(e)}),[]),e?i.a.createElement(i.a.Fragment,null,i.a.createElement(st,{addItem:function(e){var n=function(t){return function(e){e(I({status:"loading"})),z(t).then((function(t){e(v({todolist:t.data.data.item})),e(I({status:"succeeded"}))}))}}(e);t(n)}}),i.a.createElement(Mt,null,n.map((function(t){var e=o[t.id];return i.a.createElement(Lt,{key:t.id,todolist:t,tasks:e,removeTask:r,changeFilter:u,addTask:c,changeTaskStatus:l,removeTodolist:d,changeTaskTitle:s,changeTodolistTitle:f})})))):i.a.createElement(zt.a,{to:"/login"})},Wt=n(184),Yt=n(181),Vt=function(t){return t.app.isInitialized},$t=function(t){return t.app.status},Gt=function(t){return t.app.error},Qt=function(){var t=Object(_.b)(),e=Object(_.c)(Gt),n=null!==e,a=function(e,n){"clickaway"!==n&&t(x({error:null}))};return i.a.createElement(Wt.a,{open:n,autoHideDuration:6e3,onClose:a},i.a.createElement(Yt.a,{elevation:6,variant:"filled",severity:"error",onClose:a},e))},Xt=n(173),Zt=n(185),_t=n(168),te=n(174),ee=n(93),ne=rt.c.form(Et||(Et=Object(it.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]))),ae=(rt.c.p(kt||(kt=Object(it.a)(["\n  color: #2e3b55;\n"]))),function(t){return S.post("auth/login",t)}),ie=function(){return S.delete("auth/login")},oe=function(){return S.get("auth/me")},re=function(){var t=Object(_.b)(),e=Object(_.c)(Pt),n=Object(ee.a)({validate:function(t){return t.email?t.password?void 0:{password:"Password is required"}:{email:"Email is required"}},initialValues:{email:"",password:"",rememberMe:!1},onSubmit:function(e){var n;t((n=e,function(t){t(I({status:"loading"})),ae(n).then((function(e){0===e.data.resultCode?(t(Q({value:!0})),t(I({status:"succeeded"}))):Ut(e.data,t)})).catch((function(e){Jt(e,t)}))}))}}),a=n.errors.email?i.a.createElement("div",null,n.errors.email):null,o=n.errors.password?i.a.createElement("div",null,n.errors.password):null;return e?i.a.createElement(zt.a,{to:"/"}):i.a.createElement(Xt.a,{container:!0,justify:"center"},i.a.createElement(Xt.a,{item:!0},i.a.createElement(ne,{onSubmit:n.handleSubmit},i.a.createElement(Zt.a,null,i.a.createElement(_t.a,null,i.a.createElement("p",{style:{color:"#2E3B55"}},"You can use test account credentials"),i.a.createElement("p",null,i.a.createElement("span",{style:{color:"#2E3B55"}}," Email: "),"free@samuraijs.com"),i.a.createElement("p",null,i.a.createElement("span",{style:{color:"#2E3B55"}},"Password: "),"free")),i.a.createElement(te.a,null,i.a.createElement(ot.a,Object.assign({label:"Email",margin:"normal"},n.getFieldProps("email"))),a,i.a.createElement(ot.a,Object.assign({type:"password",label:"Password",margin:"normal"},n.getFieldProps("password"))),o,i.a.createElement(dt.a,{type:"submit",variant:"contained",style:{background:"#2E3B55",color:"#fff"}},"Login"))))))},ce=rt.c.div(jt||(jt=Object(it.a)(["\n  min-height: 100vh;\n  box-sizing: border-box;\n  background-color: #f9f9fa;\n"]))),le=rt.c.div(yt||(yt=Object(it.a)(["\n  padding: 40px 100px;\n\n  ","\n\n  ","\n"])),Ht.tablet(Ot||(Ot=Object(it.a)(["\n    padding: 40px 40px;\n  "]))),Ht.phone(Ct||(Ct=Object(it.a)(["\n    padding: 40px 20px;\n  "])))),se=n(175),ue=rt.c.div(Tt||(Tt=Object(it.a)(["\n  position: fixed;\n  height: 100%;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]))),de=function(){return i.a.createElement(ue,null,i.a.createElement(se.a,null))},fe=n(177),me=n(178),pe=n(179),be=n(176),ge=(rt.c.div(xt||(xt=Object(it.a)(["\n  min-height: 100vh;\n  box-sizing: border-box;\n  background-color: #f9f9fa;\n"]))),Object(rt.c)(be.a)(It||(It=Object(it.a)(["\n  display: flex;\n  justify-content: space-between;\n"])))),he=(rt.c.div(wt||(wt=Object(it.a)(["\n  padding: 40px 100px;\n"]))),function(){var t=Object(_.b)(),e=Object(_.c)(Pt),n=Object(_.c)($t);return i.a.createElement(fe.a,{position:"static",style:{background:"#2E3B55"}},i.a.createElement(ge,null,i.a.createElement(me.a,{variant:"h6"},"Todolist"),e&&i.a.createElement(dt.a,{color:"inherit",onClick:function(){return t((function(t){t(I({status:"loading"})),ie().then((function(e){0===e.data.resultCode?(t(Q({value:!1})),t(I({status:"succeeded"}))):Ut(e.data,t)})).catch((function(e){Jt(e,t)}))}))}},"Log out")),"loading"===n&&i.a.createElement(pe.a,null))}),ve=function(){var t=Object(_.b)(),e=Object(_.c)(Vt);return Object(a.useEffect)((function(){t((function(t){oe().then((function(e){0===e.data.resultCode&&t(Q({value:!0})),t(w({isInitialized:!0}))}))}))}),[]),e?i.a.createElement(ce,null,i.a.createElement(Qt,null),i.a.createElement(he,null),i.a.createElement(le,null,i.a.createElement(zt.b,{path:"/login",render:function(){return i.a.createElement(re,null)}}),i.a.createElement(zt.b,{exact:!0,path:"/",render:function(){return i.a.createElement(Rt,null)}}))):i.a.createElement(de,null)};r.a.render(i.a.createElement(_.a,{store:Z},i.a.createElement(rt.a,{theme:Nt},i.a.createElement(tt.a,null,i.a.createElement(ve,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[105,1,2]]]);
//# sourceMappingURL=main.8abffc63.chunk.js.map