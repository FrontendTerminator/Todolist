(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[0],{106:function(e,t,n){e.exports=n(134)},111:function(e,t,n){},134:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),o=n(8),r=n.n(o);n(111),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c,l,s,u,d,f=n(26),m=n(30),p=Object(m.c)({name:"todolists",initialState:[],reducers:{removeTodolistAC:function(e,t){var n=e.findIndex((function(e){return e.id===t.payload.id}));n>-1&&e.splice(n,1)},addTodolistAC:function(e,t){e.unshift(Object(f.a)(Object(f.a)({},t.payload.todolist),{},{filter:"all",entityStatus:"idle"}))},changeTodolistTitleAC:function(e,t){var n=e.findIndex((function(e){return e.id===t.payload.id}));e[n].title=t.payload.title},changeTodolistFilterAC:function(e,t){var n=e.findIndex((function(e){return e.id===t.payload.id}));e[n].filter=t.payload.filter},changeTodolistEntityStatusAC:function(e,t){var n=e.findIndex((function(e){return e.id===t.payload.id}));e[n].entityStatus=t.payload.status},setTodolistsAC:function(e,t){return t.payload.todolists.map((function(e){return Object(f.a)(Object(f.a)({},e),{},{filter:"all",entityStatus:"idle"})}))}}}),b=p.reducer,g=p.actions,h=g.removeTodolistAC,v=g.addTodolistAC,E=g.changeTodolistTitleAC,k=g.changeTodolistFilterAC,j=g.changeTodolistEntityStatusAC,y=g.setTodolistsAC,O=Object(m.c)({name:"app",initialState:{status:"idle",error:null,isInitialized:!1},reducers:{setAppStatusAC:function(e,t){e.status=t.payload.status},setAppErrorAC:function(e,t){e.error=t.payload.error},setAppInitializedAC:function(e,t){e.isInitialized=t.payload.isInitialized}}}),C=O.reducer,T=O.actions,x=T.setAppErrorAC,I=T.setAppStatusAC,w=T.setAppInitializedAC,A=n(84),S=n.n(A).a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"e68751ec-99e4-4ba5-aeca-d3d2975884b0"}}),L=function(){return S.get("todo-lists")},P=function(e){return S.post("todo-lists",{title:e})},z=function(e){return S.delete("todo-lists/".concat(e))},F=function(e,t){return S.put("todo-lists/".concat(e),{title:t})},B=function(e){return S.get("todo-lists/".concat(e,"/tasks"))},D=function(e,t){return S.delete("todo-lists/".concat(e,"/tasks/").concat(t))},M=function(e,t){return S.post("todo-lists/".concat(e,"/tasks"),{title:t})},N=function(e,t,n){return S.put("todo-lists/".concat(e,"/tasks/").concat(t),n)},q=Object(m.b)("tasks/fetchTasksTC",(function(e,t){return t.dispatch(I({status:"loading"})),B(e).then((function(n){var a=n.data.items;return t.dispatch(I({status:"succeeded"})),{tasks:a,todolistId:e}}))})),H=Object(m.c)({name:"tasks",initialState:{},reducers:{removeTaskAC:function(e,t){var n=e[t.payload.todolistId],a=n.findIndex((function(e){return e.id===t.payload.taskId}));a>-1&&n.splice(a,1)},addTaskAC:function(e,t){e[t.payload.task.todoListId].unshift(t.payload.task)},updateTaskAC:function(e,t){var n=e[t.payload.todolistId],a=n.findIndex((function(e){return e.id===t.payload.taskId}));a>-1&&(n[a]=Object(f.a)(Object(f.a)({},n[a]),t.payload.model))}},extraReducers:function(e){e.addCase(v,(function(e,t){e[t.payload.todolist.id]=[]})),e.addCase(h,(function(e,t){delete e[t.payload.id]})),e.addCase(y,(function(e,t){t.payload.todolists.forEach((function(t){e[t.id]=[]}))})),e.addCase(q.fulfilled,(function(e,t){e[t.payload.todolistId]=t.payload.tasks}))}}),R=H.reducer,U=H.actions,J=U.removeTaskAC,K=U.addTaskAC,W=U.updateTaskAC,Y=n(25),V=n(50),$=Object(m.c)({name:"auth",initialState:{isLoggedIn:!1},reducers:{setIsLoggedInAC:function(e,t){e.isLoggedIn=t.payload.value}}}),G=$.reducer,Q=$.actions.setIsLoggedInAC,X=Object(Y.c)({tasks:R,todolists:b,app:C,auth:G}),Z=Object(m.a)({reducer:X,middleware:function(e){return e().prepend(V.a)}}),_=n(15),ee=n(49),te=n(47),ne=n(171),ae=n(172),ie=n(10),oe=n(182),re=n(9),ce=re.c.div(c||(c=Object(ie.a)([""]))),le=Object(re.c)(oe.a)(l||(l=Object(ie.a)(["\n  & > div {\n    background: white;\n\n    & > fieldset {\n      border-radius: 6px;\n      border-color: #c7c9d9;\n    }\n  }\n"]))),se=function(e){var t=e.addItem,n=e.disabled,o=void 0!==n&&n,r=Object(a.useState)(""),c=Object(te.a)(r,2),l=c[0],s=c[1],u=Object(a.useState)(null),d=Object(te.a)(u,2),f=d[0],m=d[1],p=function(){""!==l.trim()?(t(l),s("")):m("Title is required")};return i.a.createElement(ce,null,i.a.createElement(le,{label:"Title",variant:"outlined",disabled:o,error:!!f,value:l,onChange:function(e){s(e.currentTarget.value)},onKeyPress:function(e){null!==f&&m(null),13===e.charCode&&p()},helperText:f}),i.a.createElement(ne.a,{color:"primary",style:{marginTop:"4px"},disabled:o,onClick:p},i.a.createElement(ae.a,null)))},ue=function(e){var t=e.value,n=e.onChange,o=Object(a.useState)(!1),r=Object(te.a)(o,2),c=r[0],l=r[1],s=Object(a.useState)(t),u=Object(te.a)(s,2),d=u[0],f=u[1];return c?i.a.createElement(oe.a,{value:d,onChange:function(e){f(e.currentTarget.value)},autoFocus:!0,onBlur:function(){l(!1),n(d)}}):i.a.createElement("span",{onDoubleClick:function(){l(!0),f(t)}},t)},de=n(174),fe=n(173),me=n(184),pe=re.c.div(s||(s=Object(ie.a)(["\n  display: flex;\n  align-items: center;\n"])));!function(e){e[e.New=0]="New",e[e.InProgress=1]="InProgress",e[e.Completed=2]="Completed",e[e.Draft=3]="Draft"}(u||(u={})),function(e){e[e.Low=0]="Low",e[e.Middle=1]="Middle",e[e.Hi=2]="Hi",e[e.Urgently=3]="Urgently",e[e.Later=4]="Later"}(d||(d={}));var be,ge,he,ve,Ee,ke,je,ye,Oe,Ce,Te,xe,Ie,we,Ae=function(e){var t=e.task,n=e.todolistId,a=e.changeTaskStatus,o=e.changeTaskTitle,r=e.removeTask,c=t.id,l=t.status,s=t.title;return i.a.createElement(pe,null,i.a.createElement(me.a,{checked:l===u.Completed,color:"primary",onChange:function(e){var t=e.currentTarget.checked?u.Completed:u.New;a(c,t,n)}}),i.a.createElement(ue,{value:s,onChange:function(e){o(c,e,n)}}),i.a.createElement(ne.a,{onClick:function(){return r(c,n)}},i.a.createElement(fe.a,null)))},Se=re.c.div(be||(be=Object(ie.a)(["\n  height: fit-content;\n  flex-shrink: 0;\n  border: 1px solid white;\n  border-radius: 8px;\n  background: white;\n  box-shadow: 0px 2px 8px 0px rgba(96, 97, 112, 0.06);\n  padding: 16px;\n"]))),Le=function(e){var t=e.todolist,n=e.tasks,o=e.changeFilter,r=e.addTask,c=e.changeTaskStatus,l=e.changeTaskTitle,s=e.removeTask,d=e.removeTodolist,f=e.changeTodolistTitle,m=Object(_.b)(),p=n;return"active"===t.filter&&(p=n.filter((function(e){return e.status===u.New}))),"completed"===t.filter&&(p=n.filter((function(e){return e.status===u.Completed}))),Object(a.useEffect)((function(){var e=q(t.id);m(e)}),[]),i.a.createElement(Se,null,i.a.createElement("h3",null,i.a.createElement(ue,{value:t.title,onChange:function(e){f(t.id,e)}}),i.a.createElement(ne.a,{onClick:function(){return d(t.id)},disabled:"loading"===t.entityStatus},i.a.createElement(fe.a,null))),i.a.createElement(se,{addItem:function(e){r(e,t.id)},disabled:"loading"===t.entityStatus}),i.a.createElement("div",null,p.map((function(e){return i.a.createElement(Ae,{key:e.id,task:e,todolistId:t.id,removeTask:s,changeTaskTitle:l,changeTaskStatus:c})}))),i.a.createElement("div",{style:{paddingTop:"10px"}},i.a.createElement(de.a,{variant:"all"===t.filter?"outlined":"text",onClick:function(){return o("all",t.id)},color:"default"},"All"),i.a.createElement(de.a,{variant:"active"===t.filter?"outlined":"text",onClick:function(){return o("active",t.id)},color:"primary"},"Active"),i.a.createElement(de.a,{variant:"completed"===t.filter?"outlined":"text",onClick:function(){return o("completed",t.id)},color:"secondary"},"Completed")))},Pe=n(16),ze=function(e){return e.auth.isLoggedIn},Fe=function(e){return e.tasks},Be=function(e){return e.todolists},De=n(56),Me={colors:{primary:"#3498db"},breakpoints:{phone:500,tablet:900}},Ne=function(e){return"@media (max-width: ".concat(e,"px)")},qe=Object.keys(Me.breakpoints).reduce((function(e,t){return Object(f.a)(Object(f.a)({},e),{},Object(De.a)({},t,(function(){return Object(re.b)(ge||(ge=Object(ie.a)(["\n      "," {\n        ","\n      }\n    "])),Ne(Me.breakpoints[t]),re.b.apply(void 0,arguments))})))}),{}),He=re.c.div(he||(he=Object(ie.a)(["\n  display: flex;\n  flex-wrap: wrap;\n  gap: 20px;\n  margin-top: 40px;\n\n  ","\n"])),qe.phone(ve||(ve=Object(ie.a)(["\n    flex-direction: column;\n  "])))),Re=function(e,t){e.messages.length?t(x({error:e.messages[0]})):t(x({error:"Some error occurred"})),t(I({status:"failed"}))},Ue=function(e,t){t(x({error:e.message?e.message:"Some error occurred"})),t(I({status:"failed"}))},Je=function(e,t,n){return function(a,i){var o=i().tasks[n].find((function(t){return t.id===e}));if(o){var r=Object(f.a)({deadline:o.deadline,description:o.description,priority:o.priority,startDate:o.startDate,title:o.title,status:o.status},t);N(n,e,r).then((function(i){if(0===i.data.resultCode){var o=W({taskId:e,model:t,todolistId:n});a(o)}else Re(i.data,a)})).catch((function(e){Ue(e,a)}))}else console.warn("task not found in the state")}},Ke=function(){var e=Object(_.b)(),t=Object(_.c)(ze),n=Object(_.c)(Be),o=Object(_.c)(Fe),r=function(t,n){var a=function(e,t){return function(n){D(t,e).then((function(a){var i=J({taskId:e,todolistId:t});n(i)}))}}(t,n);e(a)},c=function(t,n){var a=function(e,t){return function(n){n(I({status:"loading"})),M(t,e).then((function(e){if(0===e.data.resultCode){var t=e.data.data.item,a=K({task:t});n(a),n(I({status:"succeeded"}))}else Re(e.data,n)})).catch((function(e){Ue(e,n)}))}}(t,n);e(a)},l=function(t,n,a){var i=Je(t,{status:n},a);e(i)},s=function(t,n,a){var i=Je(t,{title:n},a);e(i)},u=function(t,n){var a=k({id:n,filter:t});e(a)},d=function(t){var n,a=(n=t,function(e){e(I({status:"loading"})),e(j({id:n,status:"loading"})),z(n).then((function(t){e(h({id:n})),e(I({status:"succeeded"}))}))});e(a)},f=function(t,n){var a=function(e,t){return function(n){F(e,t).then((function(a){n(E({id:e,title:t}))}))}}(t,n);e(a)};return Object(a.useEffect)((function(){var t=function(e){e(I({status:"loading"})),L().then((function(t){e(y({todolists:t.data})),e(I({status:"succeeded"}))})).catch((function(t){Ue(t,e)}))};e(t)}),[]),t?i.a.createElement(i.a.Fragment,null,i.a.createElement(se,{addItem:function(t){var n=function(e){return function(t){t(I({status:"loading"})),P(e).then((function(e){t(v({todolist:e.data.data.item})),t(I({status:"succeeded"}))}))}}(t);e(n)}}),i.a.createElement(He,null,n.map((function(e){var t=o[e.id];return i.a.createElement(Le,{key:e.id,todolist:e,tasks:t,removeTask:r,changeFilter:u,addTask:c,changeTaskStatus:l,removeTodolist:d,changeTaskTitle:s,changeTodolistTitle:f})})))):i.a.createElement(Pe.a,{to:"/login"})},We=n(186),Ye=n(183),Ve=function(e){return e.app.isInitialized},$e=function(e){return e.app.status},Ge=function(e){return e.app.error},Qe=function(){var e=Object(_.b)(),t=Object(_.c)(Ge),n=null!==t,a=function(t,n){"clickaway"!==n&&e(x({error:null}))};return i.a.createElement(We.a,{open:n,autoHideDuration:6e3,onClose:a},i.a.createElement(Ye.a,{elevation:6,variant:"filled",severity:"error",onClose:a},t))},Xe=n(175),Ze=n(187),_e=n(170),et=n(176),tt=n(177),nt=n(93),at=re.c.form(Ee||(Ee=Object(ie.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]))),it=(re.c.p(ke||(ke=Object(ie.a)(["\n  color: #2e3b55;\n"]))),function(e){return S.post("auth/login",e)}),ot=function(){return S.delete("auth/login")},rt=function(){return S.get("auth/me")},ct=function(){var e=Object(_.b)(),t=Object(_.c)(ze),n=Object(nt.a)({validate:function(e){return e.email?e.password?void 0:{password:"Password is required"}:{email:"Email is required"}},initialValues:{email:"",password:"",rememberMe:!1},onSubmit:function(t){var n;e((n=t,function(e){e(I({status:"loading"})),it(n).then((function(t){0===t.data.resultCode?(e(Q({value:!0})),e(I({status:"succeeded"}))):Re(t.data,e)})).catch((function(t){Ue(t,e)}))}))}}),a=n.errors.email?i.a.createElement("div",null,n.errors.email):null,o=n.errors.password?i.a.createElement("div",null,n.errors.password):null;return t?i.a.createElement(Pe.a,{to:"/"}):i.a.createElement(Xe.a,{container:!0,justify:"center"},i.a.createElement(Xe.a,{item:!0},i.a.createElement(at,{onSubmit:n.handleSubmit},i.a.createElement(Ze.a,null,i.a.createElement(_e.a,null,i.a.createElement("p",{style:{color:"#2E3B55"}},"You can use test account credentials"),i.a.createElement("p",null,i.a.createElement("span",{style:{color:"#2E3B55"}}," Email: "),"free@samuraijs.com"),i.a.createElement("p",null,i.a.createElement("span",{style:{color:"#2E3B55"}},"Password: "),"free")),i.a.createElement(et.a,null,i.a.createElement(oe.a,Object.assign({label:"Email",margin:"normal"},n.getFieldProps("email"))),a,i.a.createElement(oe.a,Object.assign({type:"password",label:"Password",margin:"normal"},n.getFieldProps("password"))),o,i.a.createElement(tt.a,{label:"Remember me",control:i.a.createElement(me.a,Object.assign({},n.getFieldProps("rememberMe"),{checked:n.values.rememberMe}))}),i.a.createElement(de.a,{type:"submit",variant:"contained",style:{background:"#2E3B55",color:"#fff"}},"Login"))))))},lt=re.c.div(je||(je=Object(ie.a)(["\n  min-height: 100vh;\n  box-sizing: border-box;\n  background-color: #f9f9fa;\n"]))),st=re.c.div(ye||(ye=Object(ie.a)(["\n  padding: 40px 100px;\n\n  ","\n\n  ","\n"])),qe.tablet(Oe||(Oe=Object(ie.a)(["\n    padding: 40px 40px;\n  "]))),qe.phone(Ce||(Ce=Object(ie.a)(["\n    padding: 40px 20px;\n  "])))),ut=n(178),dt=re.c.div(Te||(Te=Object(ie.a)(["\n  position: fixed;\n  height: 100%;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]))),ft=function(){return i.a.createElement(dt,null,i.a.createElement(ut.a,null))},mt=n(180),pt=n(136),bt=n(181),gt=n(179),ht=(re.c.div(xe||(xe=Object(ie.a)(["\n  min-height: 100vh;\n  box-sizing: border-box;\n  background-color: #f9f9fa;\n"]))),Object(re.c)(gt.a)(Ie||(Ie=Object(ie.a)(["\n  display: flex;\n  justify-content: space-between;\n"])))),vt=(re.c.div(we||(we=Object(ie.a)(["\n  padding: 40px 100px;\n"]))),function(){var e=Object(_.b)(),t=Object(_.c)(ze),n=Object(_.c)($e);return i.a.createElement(mt.a,{position:"static",style:{background:"#2E3B55"}},i.a.createElement(ht,null,i.a.createElement(pt.a,{variant:"h6"},"Todolist"),t&&i.a.createElement(de.a,{color:"inherit",onClick:function(){return e((function(e){e(I({status:"loading"})),ot().then((function(t){0===t.data.resultCode?(e(Q({value:!1})),e(I({status:"succeeded"}))):Re(t.data,e)})).catch((function(t){Ue(t,e)}))}))}},"Log out")),"loading"===n&&i.a.createElement(bt.a,null))}),Et=function(){var e=Object(_.b)(),t=Object(_.c)(Ve);return Object(a.useEffect)((function(){e((function(e){rt().then((function(t){0===t.data.resultCode&&e(Q({value:!0})),e(w({isInitialized:!0}))}))}))}),[]),t?i.a.createElement(lt,null,i.a.createElement(Qe,null),i.a.createElement(vt,null),i.a.createElement(st,null,i.a.createElement(Pe.b,{path:"/login",render:function(){return i.a.createElement(ct,null)}}),i.a.createElement(Pe.b,{exact:!0,path:"/",render:function(){return i.a.createElement(Ke,null)}}))):i.a.createElement(ft,null)};r.a.render(i.a.createElement(_.a,{store:Z},i.a.createElement(re.a,{theme:Me},i.a.createElement(ee.a,null,i.a.createElement(Et,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[106,1,2]]]);
//# sourceMappingURL=main.908202ef.chunk.js.map